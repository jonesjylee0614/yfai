# 当前缺失功能清单

以下按模块汇总目前仍缺失或待加强的基础能力，便于后续排期：

## 会话与助手

WA-1. 会话列表无法“一键打开到聊天”：无法直接选中某条历史会话并让聊天窗口加载该会话/助手。  
WA-2. `messages` 记录中没有写入实际使用的模型，历史对话无法追踪模型来源。  
WA-3. 切换助手只会新建会话；旧会话无法自动切换到相同助手配置继续对话。

## 模型状态与持久化

MS-1. 工具栏显示的 Provider/模型只是内存状态，没有写回数据库或运行记录。  
MS-2. “自动/路由”模式没有可视化指示；无法看到实际走哪条路由。  
MS-3. 在 UI 中切换 Provider/模型后不会写回 `configs/config.yaml`，重启即丢失。

## 联网搜索

WS-1. 仅有 DuckDuckGo 摘要，缺少多条结果、引用链接、地域/语言等可配置选项。  
WS-2. 联网内容未持久化到日志/消息，无法回溯检索过程。  
WS-3. 尚未与 Provider 的 native browsing/retrieval 方案对接，也没有可扩展的搜索适配层。

## 智能体运行

AG-1. Agents 页没有实时步骤日志或中断控制，只能在任务完成后查看总结。  
AG-2. “运行记录”页缺少按智能体/状态过滤和搜索功能。  
AG-3. 运行过程中不会显示当前模型/工具，定位问题困难。

## 日志与审批

LA-1. 日志页把工具调用、审批、系统事件混在一张表，缺少分页/导出。  
LA-2. 审批记录没有独立管理界面或批量处理，仍依赖控制台弹窗。  
LA-3. “清空日志”仅删除 `tool_calls`，不会同步清理 JobRun/JobStep 等关联表。

## 工具/自动化/知识库

TK-1. Tools 页只展示静态列表，没有真实工具启停、执行或统计。  
TK-2. Automation 页面缺少任务调度执行能力，无法创建/启用定时任务。  
TK-3. Knowledge/Connector 等模块大多是占位式 CRUD，未接入实际索引/同步流程。

## 配置与同步

CS-1. 模型、助手、智能体页的更改不会合并回 ConfigManager 或触发 Provider 热更新。  
CS-2. 缺少助手/智能体配置的导入导出功能，无法在不同环境迁移。

## 退出与资源清理

RC-1. 关闭应用时不会取消/等待正在运行的流式任务，httpx 依旧打印 `GeneratorExit`。  
RC-2. 没有统一的任务管理器，在退出前无法确认所有协程已结束。

## 错误提示与测试

ET-1. 联网或模型调用失败仅显示简短状态提示，没有写入消息或提供降级方案。  
ET-2. 新增的联网、流式聊天、日志等功能缺少自动化测试覆盖，易回归。
