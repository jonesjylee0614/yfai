# AI 控制台 - 原型页面说明

## 项目概述

这是 AI 控制台项目的 HTML 原型，基于设计文档实现了完整的 UI 界面。项目定位是本地"对话式控制台"，统一接入百炼（DashScope）与本地 Ollama，作为 MCP Client 调用各类 MCP Server，并暴露一套可审计的本地控制能力。

## 目录结构

```
prototype/
├── assets/               # 公共资源文件夹
│   ├── common.css       # 公共样式表
│   └── common.js        # 公共脚本
├── index.html           # 主界面 - 对话窗口
├── assistants.html      # 🆕 AI 助手管理
├── sessions.html        # 🆕 会话历史管理
├── knowledge.html       # 🆕 知识库 RAG 功能
├── tools-sidebar.html   # 工具侧栏
├── approval-dialog.html # 审批弹窗
├── command-palette.html # 命令面板
├── logs.html           # 日志记录页面
├── settings.html       # 配置管理页面
└── README.md          # 本说明文档
```

## 页面功能说明

### 🆕 Cherry Studio 风格功能

参考 CherryStudio 的优秀设计，新增以下核心功能：

#### 1. AI 助手管理 (assistants.html)

**核心功能：**
- 🤖 创建和管理多个专业 AI 助手
- 🎨 预设角色模板（Python 专家、技术写作、翻译、DevOps 等）
- 📝 自定义系统提示词
- 🎯 为不同任务配置不同的助手
- 📊 使用统计和历史记录

**预置助手：**
- Python 编程助手
- 技术写作助手
- 中英翻译专家
- DevOps 运维助手
- SQL 数据分析师
- 前端开发助手

#### 2. 会话管理 (sessions.html)

**核心功能：**
- 📚 完整的对话历史记录
- 🔍 按时间、助手、标签搜索
- 📊 会话统计信息
- 💬 消息预览和完整查看
- 💾 导出会话记录
- 🔄 继续历史会话

**会话信息：**
- 会话标题和预览
- 使用的助手和模型
- 消息数量和时长
- 标签分类
- 创建和更新时间

#### 3. 知识库 RAG (knowledge.html)

**核心功能：**
- 📖 创建和管理多个知识库
- 🔍 向量检索增强生成
- 📁 支持多种数据源（文档、目录、网页、数据库）
- 🧠 多种向量模型（DashScope、BGE、M3E）
- ⚡ 实时搜索测试
- 📊 索引统计和管理

**知识库类型：**
- 文档集合（PDF、Word、Markdown 等）
- 目录索引（自动扫描目录）
- 网页爬虫（爬取技术博客）
- 数据库连接

**向量模型：**
- Text Embedding V1 (DashScope)
- BGE-Large-ZH (本地)
- M3E-Base (本地)

**分块策略：**
- 固定大小分块
- 段落智能分割
- 语义分割

### 1. 主界面 (index.html)

**核心功能：**
- 💬 对话式交互界面
- 📊 流式输出显示
- 🎯 快捷操作面板
- 🔧 工具面板集成
- ⌨️ 支持命令模式（/ps, /tool 等）
- 📎 支持文件附加、引用、模板

**交互特性：**
- 实时响应用户输入
- 打字机效果展示
- 支持 Ctrl+K 打开命令面板
- Enter 发送，Shift+Enter 换行
- 可切换模型提供商（百炼/Ollama）
- 🆕 快速访问助手、知识库、会话管理

### 2. 工具侧栏 (tools-sidebar.html)

**核心功能：**
- 🔧 MCP 服务器管理
- 💻 本地工具展示
- 🔍 工具搜索功能
- 📂 分类浏览（MCP/本地）
- ✅ 实时状态显示

**工具类型：**
- **MCP 工具**：files、devops、database
- **本地工具**：文件操作、Shell 脚本、进程管理、网络工具、剪贴板、UI 自动化

### 3. 审批弹窗 (approval-dialog.html)

**核心功能：**
- ⚠️ 操作前确认
- 🎯 风险等级展示（低危/中危/高危/严重）
- 📋 详细信息预览
- ✅ 安全确认清单
- ⏱️ 自动超时拒绝（60秒）
- 📊 影响评估展示

**风险等级：**
- **低危**：只读操作
- **中危**：脚本执行、进程查询
- **高危**：文件修改、进程终止
- **严重**：系统级操作、批量删除

### 4. 命令面板 (command-palette.html)

**核心功能：**
- 🔍 快速搜索命令
- ⌨️ 键盘导航（↑↓ 选择，Enter 执行）
- 📂 命令分类（文件/脚本/MCP/系统）
- 🕐 最近使用记录
- ⚡ 快捷键提示

**支持命令类型：**
- 文件操作：读取、搜索、列表、索引
- Shell 脚本：PowerShell、Bash、Python、模板
- MCP 工具：列表、调用、启动、停止
- 系统操作：新建对话、设置、日志、导出、帮助

### 5. 日志记录 (logs.html)

**核心功能：**
- 📋 完整操作日志
- 🔍 多维度过滤（类型/风险/时间）
- 🔎 关键词搜索
- 📊 统计数据展示
- 💾 日志导出（Markdown/CSV）
- 🗑️ 日志清理功能

**日志类型：**
- 工具调用
- 审批记录
- 错误日志
- 系统事件

**记录内容：**
- 操作时间、类型、来源
- 命令内容、参数
- 执行结果、耗时
- 风险等级、审批状态

### 6. 配置管理 (settings.html)

**核心功能：**
- ⚙️ 通用设置
- 🤖 模型提供商配置
- 🔧 MCP 服务管理
- 💻 本地控制权限
- 🔒 安全与审计策略
- ⌨️ 快捷键查看
- ℹ️ 系统信息

**配置项：**
- 自动保存、流式输出、显示思考过程
- API Key 配置
- 模型路由策略
- 文件访问白名单
- 操作确认阈值
- 日志保留策略

## 技术特性

### 1. 设计风格

- 🎨 深色主题（适合长时间使用）
- 🎭 现代化 UI（圆角、阴影、动画）
- 📱 响应式布局（支持不同屏幕尺寸）
- ♿ 良好的可访问性

### 2. 交互体验

- ⚡ 流畅的动画效果
- 🎯 清晰的视觉反馈
- 💡 智能的提示信息
- ⌨️ 完整的键盘支持

### 3. 技术栈

- **HTML5**：语义化标签
- **CSS3**：变量、动画、Grid/Flexbox
- **Vanilla JavaScript**：无框架依赖
- **LocalStorage**：本地数据持久化

### 4. 公共组件

**样式组件 (common.css)：**
- 主题变量（颜色、间距、字体）
- 按钮样式（primary/success/warning/danger/secondary）
- 表单控件（input/textarea/select）
- 标签徽章（tag/badge）
- 卡片样式（card）
- 消息样式（message）
- 滚动条样式

**工具函数 (common.js)：**
- `Utils.formatTime()` - 时间格式化
- `Utils.uuid()` - UUID 生成
- `Utils.copyToClipboard()` - 剪贴板操作
- `Utils.showToast()` - 提示消息
- `Utils.confirm()` - 确认对话框
- `Storage.set/get()` - 本地存储

## 使用说明

### 1. 快速开始

1. 直接在浏览器中打开 `index.html`
2. 无需服务器环境，可本地预览
3. 所有页面独立，可单独浏览
4. 🆕 所有页面包含丰富的测试样例数据

### 2. 页面导航

- 从主界面左侧导航栏可访问各功能页面
- 点击右上角工具按钮可展开工具面板
- 按 `Ctrl+K` 可打开命令面板
- 审批弹窗会在需要时自动弹出

### 3. 交互测试

**主界面：**
- 在输入框输入消息测试对话
- 点击快捷操作卡片体验预设命令
- 使用命令模式（如 `/ps` 开头）
- 测试流式输出和打字机效果
- 🆕 快速跳转到助手、知识库、会话管理

**助手管理：**
- 浏览预置的 6 个专业助手
- 创建自定义助手
- 选择预设提示词模板
- 配置助手参数和模型

**会话管理：**
- 按时间分组查看历史会话
- 搜索特定会话
- 查看会话详情和统计
- 继续历史对话
- 导出会话记录

**知识库：**
- 浏览 5 个预置知识库
- 测试 RAG 检索功能
- 输入关键词查看检索结果
- 查看相似度评分
- 创建新知识库

**工具侧栏：**
- 切换不同分类标签
- 搜索特定工具
- 点击"使用"按钮测试工具调用

**审批弹窗：**
- 查看不同风险等级的样式
- 勾选确认清单解锁批准按钮
- 观察倒计时功能

**命令面板：**
- 使用键盘↑↓导航
- 输入关键词搜索命令
- 切换不同分类查看

**日志页面：**
- 使用过滤器筛选日志
- 展开日志查看详情
- 测试搜索功能

**设置页面：**
- 切换不同设置分区
- 开关各种功能选项
- 查看系统信息

## 设计理念

### 1. 安全第一

- 🛡️ 所有危险操作都需要审批
- 📊 完整的操作审计日志
- 🔒 敏感信息自动脱敏
- ⚠️ 清晰的风险等级提示

### 2. 效率优先

- ⚡ 快捷键支持
- 🎯 命令面板快速访问
- 📋 常用操作模板化
- 🔄 操作历史可重放

### 3. 可控透明

- 👁️ 所有操作可追溯
- 📝 详细的执行计划展示
- ✅ 明确的权限边界
- 🔍 完整的日志记录

### 4. 易用友好

- 💬 自然语言交互
- 🎨 美观的界面设计
- 💡 智能的提示引导
- 📚 丰富的帮助文档

## 后续实现建议

### 1. 前端框架迁移

考虑使用现代框架重构：
- **React** + TypeScript：组件化、类型安全
- **Vue 3**：渐进式、易上手
- **Svelte**：高性能、编译时优化

### 2. 桌面应用封装

建议使用：
- **PyQt6**（推荐）：与 Python 后端无缝集成
- **Electron**：Web 技术栈，跨平台
- **Tauri**：Rust + Web，体积小性能好

### 3. 状态管理

- 引入 Redux/Vuex/Pinia 管理全局状态
- 实现会话持久化
- 优化数据流

### 4. 实时通信

- 实现 WebSocket 连接
- 支持服务端推送
- 实时状态更新

### 5. 性能优化

- 虚拟滚动（日志列表）
- 懒加载（工具列表）
- 代码分割（按需加载）

### 6. 测试覆盖

- 单元测试（Jest/Vitest）
- 集成测试（Cypress/Playwright）
- E2E 测试

## 配色方案

```css
--primary-color: #1890ff;    /* 主色调 - 蓝色 */
--success-color: #52c41a;    /* 成功 - 绿色 */
--warning-color: #faad14;    /* 警告 - 橙色 */
--danger-color: #ff4d4f;     /* 危险 - 红色 */
--bg-dark: #1e1e1e;         /* 深色背景 */
--bg-darker: #141414;       /* 更深背景 */
--bg-light: #252525;        /* 浅色背景 */
--text-primary: #e8e8e8;    /* 主文本 */
--text-secondary: #a8a8a8;  /* 次要文本 */
--border-color: #3a3a3a;    /* 边框色 */
```

## 浏览器兼容性

- ✅ Chrome/Edge 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ⚠️ IE 不支持

## 开发团队

基于需求文档设计开发，遵循最佳实践和设计模式。

## 版本历史

- **v1.1.0** (2025-11-12)
  - 🆕 新增 AI 助手管理（参考 CherryStudio）
  - 🆕 新增会话历史管理
  - 🆕 新增知识库 RAG 功能
  - 🆕 所有页面添加丰富测试数据
  - ✨ 优化导航体验
  - ✨ 增强交互反馈

- **v1.0.0** (2025-11-12)
  - ✅ 完成所有核心页面
  - ✅ 实现基础交互功能
  - ✅ 建立公共组件库
  - ✅ 完善样式系统

## 许可证

本原型仅供项目内部使用和参考。

---

**注意：** 这是一个静态 HTML 原型，所有数据和交互都是模拟的。实际功能需要后端 API 支持。

