<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼šè¯ç®¡ç†</title>
    <link rel="stylesheet" href="assets/common.css">
    <style>
        body {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* ä¾§è¾¹æ æ ·å¼ï¼ˆå¤ç”¨ï¼‰ */
        .sidebar {
            width: 60px;
            background: var(--bg-darker);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px 0;
            transition: width 0.3s;
        }

        .sidebar:hover {
            width: 200px;
        }

        .sidebar-item {
            width: 100%;
            padding: 12px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            color: var(--text-secondary);
            text-decoration: none;
            white-space: nowrap;
        }

        .sidebar-item:hover {
            background: var(--bg-light);
            color: var(--text-primary);
        }

        .sidebar-item.active {
            background: var(--bg-light);
            color: var(--primary-color);
            border-left: 3px solid var(--primary-color);
        }

        .sidebar-icon {
            width: 24px;
            height: 24px;
            margin: 0 auto;
            font-size: 20px;
        }

        .sidebar:hover .sidebar-icon {
            margin: 0 12px 0 0;
        }

        .sidebar-text {
            display: none;
            font-size: 14px;
        }

        .sidebar:hover .sidebar-text {
            display: inline;
        }

        /* ä¸»å†…å®¹åŒº */
        .main-container {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        /* ä¼šè¯åˆ—è¡¨ */
        .sessions-sidebar {
            width: 320px;
            background: var(--bg-dark);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .sessions-header {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .search-box {
            margin-bottom: 12px;
        }

        .search-input {
            width: 100%;
            padding: 8px 12px;
        }

        .filter-tabs {
            display: flex;
            gap: 8px;
        }

        .filter-tab {
            flex: 1;
            padding: 6px;
            text-align: center;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
            color: var(--text-secondary);
        }

        .filter-tab.active {
            background: var(--primary-color);
            color: white;
        }

        .sessions-list {
            flex: 1;
            overflow-y: auto;
            padding: 8px;
        }

        .session-group {
            margin-bottom: 16px;
        }

        .session-group-title {
            font-size: 12px;
            color: var(--text-secondary);
            padding: 8px 12px;
            text-transform: uppercase;
        }

        .session-item {
            padding: 12px;
            background: var(--bg-light);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            margin-bottom: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .session-item:hover {
            border-color: var(--primary-color);
            transform: translateX(4px);
        }

        .session-item.active {
            border-color: var(--primary-color);
            background: rgba(24, 144, 255, 0.1);
        }

        .session-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }

        .session-title {
            font-weight: 600;
            font-size: 14px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            flex: 1;
        }

        .session-preview {
            font-size: 12px;
            color: var(--text-secondary);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-bottom: 6px;
        }

        .session-meta {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* ä¼šè¯è¯¦æƒ… */
        .session-detail {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .detail-header {
            padding: 16px 20px;
            background: var(--bg-dark);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .detail-title {
            font-size: 18px;
            font-weight: 600;
        }

        .detail-actions {
            display: flex;
            gap: 8px;
        }

        .detail-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .session-info-card {
            background: var(--bg-light);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 20px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .info-label {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .info-value {
            font-size: 14px;
            font-weight: 600;
        }

        .messages-preview {
            background: var(--bg-light);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 16px;
        }

        .preview-title {
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .message-preview-item {
            padding: 12px;
            background: var(--bg-darker);
            border-radius: var(--radius);
            margin-bottom: 8px;
        }

        .message-preview-header {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 6px;
        }

        .message-preview-content {
            font-size: 13px;
            color: var(--text-primary);
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
        }

        .empty-state {
            text-align: center;
            padding: 80px 20px;
            color: var(--text-secondary);
        }

        .empty-icon {
            font-size: 64px;
            margin-bottom: 16px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--bg-light);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 16px;
            text-align: center;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
        }
    </style>
</head>
<body>
    <!-- å·¦ä¾§å¯¼èˆªæ  -->
    <div class="sidebar">
        <a href="index.html" class="sidebar-item">
            <span class="sidebar-icon">ğŸ’¬</span>
            <span class="sidebar-text">å¯¹è¯</span>
        </a>
        <a href="assistants.html" class="sidebar-item">
            <span class="sidebar-icon">ğŸ¤–</span>
            <span class="sidebar-text">åŠ©æ‰‹</span>
        </a>
        <a href="sessions.html" class="sidebar-item active">
            <span class="sidebar-icon">ğŸ“š</span>
            <span class="sidebar-text">ä¼šè¯</span>
        </a>
        <a href="knowledge.html" class="sidebar-item">
            <span class="sidebar-icon">ğŸ“–</span>
            <span class="sidebar-text">çŸ¥è¯†åº“</span>
        </a>
        <a href="tools-sidebar.html" class="sidebar-item">
            <span class="sidebar-icon">ğŸ› ï¸</span>
            <span class="sidebar-text">å·¥å…·</span>
        </a>
        <a href="logs.html" class="sidebar-item">
            <span class="sidebar-icon">ğŸ“‹</span>
            <span class="sidebar-text">æ—¥å¿—</span>
        </a>
        <a href="settings.html" class="sidebar-item">
            <span class="sidebar-icon">âš™ï¸</span>
            <span class="sidebar-text">è®¾ç½®</span>
        </a>
    </div>

    <!-- ä¼šè¯åˆ—è¡¨ -->
    <div class="sessions-sidebar">
        <div class="sessions-header">
            <div class="search-box">
                <input type="text" class="search-input" placeholder="æœç´¢ä¼šè¯..." oninput="searchSessions(this.value)">
            </div>
            <div class="filter-tabs">
                <div class="filter-tab active" onclick="filterSessions('all')">å…¨éƒ¨</div>
                <div class="filter-tab" onclick="filterSessions('today')">ä»Šå¤©</div>
                <div class="filter-tab" onclick="filterSessions('week')">æœ¬å‘¨</div>
            </div>
        </div>
        <div class="sessions-list" id="sessionsList">
            <!-- ä¼šè¯åˆ—è¡¨å°†åŠ¨æ€ç”Ÿæˆ -->
        </div>
    </div>

    <!-- ä¼šè¯è¯¦æƒ… -->
    <div class="session-detail">
        <div class="detail-header">
            <div class="detail-title" id="detailTitle">é€‰æ‹©ä¸€ä¸ªä¼šè¯æŸ¥çœ‹è¯¦æƒ…</div>
            <div class="detail-actions">
                <button class="btn btn-secondary btn-small" onclick="exportSession()" id="exportBtn" disabled>
                    ğŸ“¥ å¯¼å‡º
                </button>
                <button class="btn btn-primary btn-small" onclick="continueSession()" id="continueBtn" disabled>
                    ç»§ç»­å¯¹è¯
                </button>
                <button class="btn btn-danger btn-small" onclick="deleteSession()" id="deleteBtn" disabled>
                    ğŸ—‘ï¸ åˆ é™¤
                </button>
            </div>
        </div>
        <div class="detail-content" id="detailContent">
            <div class="empty-state">
                <div class="empty-icon">ğŸ“š</div>
                <div>é€‰æ‹©å·¦ä¾§ä¼šè¯æŸ¥çœ‹è¯¦ç»†å†…å®¹</div>
            </div>
        </div>
    </div>

    <script src="assets/common.js"></script>
    <script>
        // æµ‹è¯•æ•°æ®ï¼šä¼šè¯åˆ—è¡¨
        const sessions = [
            {
                id: 1,
                title: 'Python æ€§èƒ½ä¼˜åŒ–è®¨è®º',
                assistant: 'Python ç¼–ç¨‹åŠ©æ‰‹',
                preview: 'æˆ‘æƒ³äº†è§£å¦‚ä½•ä¼˜åŒ– Python ä»£ç çš„æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯å¤„ç†å¤§æ•°æ®é›†çš„æ—¶å€™...',
                messageCount: 15,
                model: 'Qwen 2.5 Coder',
                createdAt: new Date('2025-11-12 14:30:00'),
                updatedAt: new Date('2025-11-12 16:45:00'),
                tags: ['Python', 'æ€§èƒ½ä¼˜åŒ–', 'æ•°æ®å¤„ç†'],
                messages: [
                    { role: 'user', content: 'æˆ‘æƒ³äº†è§£å¦‚ä½•ä¼˜åŒ– Python ä»£ç çš„æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯å¤„ç†å¤§æ•°æ®é›†çš„æ—¶å€™...', timestamp: '14:30' },
                    { role: 'assistant', content: 'é’ˆå¯¹å¤§æ•°æ®é›†çš„ Python æ€§èƒ½ä¼˜åŒ–ï¼Œæœ‰å‡ ä¸ªå…³é”®æ–¹å‘ï¼š\n\n1. ä½¿ç”¨ NumPy/Pandas è€Œä¸æ˜¯çº¯ Python å¾ªç¯\n2. åˆ©ç”¨å‘é‡åŒ–æ“ä½œ\n3. è€ƒè™‘ä½¿ç”¨ Dask è¿›è¡Œå¹¶è¡Œè®¡ç®—\n4. ä½¿ç”¨ç”Ÿæˆå™¨å‡å°‘å†…å­˜å ç”¨', timestamp: '14:31' },
                    { role: 'user', content: 'èƒ½ç»™æˆ‘ä¸€ä¸ªå…·ä½“çš„ä¾‹å­å—ï¼Ÿæ¯”å¦‚å¤„ç†ç™¾ä¸‡çº§æ•°æ®çš„æ±‚å’Œæ“ä½œï¼Ÿ', timestamp: '14:35' }
                ]
            },
            {
                id: 2,
                title: 'æŠ€æœ¯åšå®¢å†™ä½œæŒ‡å¯¼',
                assistant: 'æŠ€æœ¯å†™ä½œåŠ©æ‰‹',
                preview: 'æˆ‘æƒ³å†™ä¸€ç¯‡å…³äºå¾®æœåŠ¡æ¶æ„çš„æŠ€æœ¯åšå®¢ï¼Œåº”è¯¥å¦‚ä½•ç»„ç»‡å†…å®¹ç»“æ„ï¼Ÿ',
                messageCount: 8,
                model: 'Qwen-Plus',
                createdAt: new Date('2025-11-12 10:15:00'),
                updatedAt: new Date('2025-11-12 11:20:00'),
                tags: ['å†™ä½œ', 'æŠ€æœ¯åšå®¢', 'å¾®æœåŠ¡'],
                messages: [
                    { role: 'user', content: 'æˆ‘æƒ³å†™ä¸€ç¯‡å…³äºå¾®æœåŠ¡æ¶æ„çš„æŠ€æœ¯åšå®¢...', timestamp: '10:15' },
                    { role: 'assistant', content: 'å†™æŠ€æœ¯åšå®¢çš„ç»“æ„å»ºè®®...', timestamp: '10:16' }
                ]
            },
            {
                id: 3,
                title: 'Kubernetes éƒ¨ç½²é—®é¢˜æ’æŸ¥',
                assistant: 'DevOps è¿ç»´åŠ©æ‰‹',
                preview: 'Pod ä¸€ç›´å¤„äº CrashLoopBackOff çŠ¶æ€ï¼Œæ—¥å¿—æ˜¾ç¤ºè¿æ¥æ•°æ®åº“å¤±è´¥...',
                messageCount: 12,
                model: 'Qwen-Plus',
                createdAt: new Date('2025-11-11 16:00:00'),
                updatedAt: new Date('2025-11-11 18:30:00'),
                tags: ['Kubernetes', 'æ•…éšœæ’æŸ¥', 'DevOps'],
                messages: []
            },
            {
                id: 4,
                title: 'è‹±æ–‡æŠ€æœ¯æ–‡æ¡£ç¿»è¯‘',
                assistant: 'ä¸­è‹±ç¿»è¯‘ä¸“å®¶',
                preview: 'éœ€è¦å°†è¿™ä»½ API æ–‡æ¡£ä»è‹±æ–‡ç¿»è¯‘æˆä¸­æ–‡ï¼Œä¿æŒä¸“ä¸šæœ¯è¯­çš„å‡†ç¡®æ€§...',
                messageCount: 20,
                model: 'Qwen-Max',
                createdAt: new Date('2025-11-11 14:00:00'),
                updatedAt: new Date('2025-11-11 15:30:00'),
                tags: ['ç¿»è¯‘', 'APIæ–‡æ¡£'],
                messages: []
            },
            {
                id: 5,
                title: 'SQL æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–',
                assistant: 'SQL æ•°æ®åˆ†æå¸ˆ',
                preview: 'ä¸€ä¸ªå¤æ‚çš„ JOIN æŸ¥è¯¢è¿è¡Œå¾ˆæ…¢ï¼Œæœ‰ä»€ä¹ˆä¼˜åŒ–å»ºè®®å—ï¼Ÿ',
                messageCount: 10,
                model: 'Qwen-Plus',
                createdAt: new Date('2025-11-10 09:00:00'),
                updatedAt: new Date('2025-11-10 10:15:00'),
                tags: ['SQL', 'æ€§èƒ½ä¼˜åŒ–', 'æ•°æ®åº“'],
                messages: []
            },
            {
                id: 6,
                title: 'React ç»„ä»¶è®¾è®¡è®¨è®º',
                assistant: 'å‰ç«¯å¼€å‘åŠ©æ‰‹',
                preview: 'å¦‚ä½•è®¾è®¡ä¸€ä¸ªå¯å¤ç”¨çš„è¡¨å•ç»„ä»¶ï¼Œæ”¯æŒå„ç§éªŒè¯è§„åˆ™ï¼Ÿ',
                messageCount: 18,
                model: 'Qwen 2.5 Coder',
                createdAt: new Date('2025-11-10 15:30:00'),
                updatedAt: new Date('2025-11-10 17:00:00'),
                tags: ['React', 'ç»„ä»¶è®¾è®¡', 'å‰ç«¯'],
                messages: []
            }
        ];

        let currentSession = null;
        let filteredSessions = [...sessions];

        // åˆå§‹åŒ–
        window.onload = function() {
            renderSessionsList();
        };

        // æ¸²æŸ“ä¼šè¯åˆ—è¡¨
        function renderSessionsList() {
            const container = document.getElementById('sessionsList');
            container.innerHTML = '';

            // æŒ‰æ—¥æœŸåˆ†ç»„
            const today = [];
            const yesterday = [];
            const thisWeek = [];
            const older = [];

            const now = new Date();
            const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const yesterdayStart = new Date(todayStart - 86400000);
            const weekStart = new Date(todayStart - 7 * 86400000);

            filteredSessions.forEach(session => {
                if (session.updatedAt >= todayStart) {
                    today.push(session);
                } else if (session.updatedAt >= yesterdayStart) {
                    yesterday.push(session);
                } else if (session.updatedAt >= weekStart) {
                    thisWeek.push(session);
                } else {
                    older.push(session);
                }
            });

            // æ¸²æŸ“å„ç»„
            if (today.length > 0) {
                renderSessionGroup('ä»Šå¤©', today);
            }
            if (yesterday.length > 0) {
                renderSessionGroup('æ˜¨å¤©', yesterday);
            }
            if (thisWeek.length > 0) {
                renderSessionGroup('æœ¬å‘¨', thisWeek);
            }
            if (older.length > 0) {
                renderSessionGroup('æ›´æ—©', older);
            }
        }

        // æ¸²æŸ“ä¼šè¯ç»„
        function renderSessionGroup(title, sessions) {
            const container = document.getElementById('sessionsList');
            
            const group = document.createElement('div');
            group.className = 'session-group';
            group.innerHTML = `<div class="session-group-title">${title}</div>`;

            sessions.forEach(session => {
                const item = document.createElement('div');
                item.className = 'session-item';
                if (currentSession && currentSession.id === session.id) {
                    item.classList.add('active');
                }
                
                item.innerHTML = `
                    <div class="session-item-header">
                        <div class="session-title">${session.title}</div>
                    </div>
                    <div class="session-preview">${session.preview}</div>
                    <div class="session-meta">
                        <span>ğŸ’¬ ${session.messageCount} æ¡æ¶ˆæ¯</span>
                        <span>ğŸ¤– ${session.assistant}</span>
                    </div>
                `;
                
                item.onclick = () => showSessionDetail(session);
                group.appendChild(item);
            });

            container.appendChild(group);
        }

        // æ˜¾ç¤ºä¼šè¯è¯¦æƒ…
        function showSessionDetail(session) {
            currentSession = session;
            
            // æ›´æ–°æ ‡é¢˜
            document.getElementById('detailTitle').textContent = session.title;
            
            // å¯ç”¨æŒ‰é’®
            document.getElementById('exportBtn').disabled = false;
            document.getElementById('continueBtn').disabled = false;
            document.getElementById('deleteBtn').disabled = false;

            // æ¸²æŸ“è¯¦æƒ…å†…å®¹
            const content = document.getElementById('detailContent');
            content.innerHTML = `
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">${session.messageCount}</div>
                        <div class="stat-label">æ¶ˆæ¯æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${session.tags.length}</div>
                        <div class="stat-label">æ ‡ç­¾æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${Math.floor((session.updatedAt - session.createdAt) / 60000)}</div>
                        <div class="stat-label">æŒç»­æ—¶é•¿(åˆ†é’Ÿ)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${session.model.split(' ')[0]}</div>
                        <div class="stat-label">ä½¿ç”¨æ¨¡å‹</div>
                    </div>
                </div>

                <div class="session-info-card">
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">åŠ©æ‰‹</div>
                            <div class="info-value">ğŸ¤– ${session.assistant}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">æ¨¡å‹</div>
                            <div class="info-value">${session.model}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">åˆ›å»ºæ—¶é—´</div>
                            <div class="info-value">${Utils.formatTime(session.createdAt)}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">æœ€åæ›´æ–°</div>
                            <div class="info-value">${Utils.formatTime(session.updatedAt)}</div>
                        </div>
                    </div>
                    <div style="margin-top: 16px;">
                        <div class="info-label" style="margin-bottom: 8px;">æ ‡ç­¾</div>
                        <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                            ${session.tags.map(tag => `<span class="tag tag-low">${tag}</span>`).join('')}
                        </div>
                    </div>
                </div>

                <div class="messages-preview">
                    <div class="preview-title">
                        <span>æ¶ˆæ¯é¢„è§ˆ</span>
                        <span class="tag tag-low">${session.messages.length} / ${session.messageCount} æ¡</span>
                    </div>
                    ${session.messages.length > 0 ? session.messages.map(msg => `
                        <div class="message-preview-item">
                            <div class="message-preview-header">
                                <span>${msg.role === 'user' ? 'ğŸ‘¤ ç”¨æˆ·' : 'ğŸ¤– åŠ©æ‰‹'}</span>
                                <span>${msg.timestamp}</span>
                            </div>
                            <div class="message-preview-content">${msg.content}</div>
                        </div>
                    `).join('') : '<div style="text-align: center; color: var(--text-secondary); padding: 20px;">æ¶ˆæ¯å†…å®¹å·²å½’æ¡£</div>'}
                </div>
            `;

            // æ›´æ–°åˆ—è¡¨ä¸­çš„é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.session-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
        }

        // æœç´¢ä¼šè¯
        function searchSessions(query) {
            query = query.toLowerCase();
            if (!query) {
                filteredSessions = [...sessions];
            } else {
                filteredSessions = sessions.filter(s => 
                    s.title.toLowerCase().includes(query) ||
                    s.preview.toLowerCase().includes(query) ||
                    s.tags.some(tag => tag.toLowerCase().includes(query))
                );
            }
            renderSessionsList();
        }

        // è¿‡æ»¤ä¼šè¯
        function filterSessions(filter) {
            const now = new Date();
            const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const weekStart = new Date(todayStart - 7 * 86400000);

            switch(filter) {
                case 'today':
                    filteredSessions = sessions.filter(s => s.updatedAt >= todayStart);
                    break;
                case 'week':
                    filteredSessions = sessions.filter(s => s.updatedAt >= weekStart);
                    break;
                default:
                    filteredSessions = [...sessions];
            }

            // æ›´æ–°æ ‡ç­¾æ ·å¼
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            renderSessionsList();
        }

        // ç»§ç»­ä¼šè¯
        function continueSession() {
            if (currentSession) {
                Storage.set('currentSession', currentSession);
                window.location.href = 'index.html';
            }
        }

        // å¯¼å‡ºä¼šè¯
        function exportSession() {
            if (currentSession) {
                Utils.showToast('æ­£åœ¨å¯¼å‡ºä¼šè¯...', 'info');
                setTimeout(() => {
                    Utils.showToast('ä¼šè¯å·²å¯¼å‡ºä¸º Markdown', 'success');
                }, 1000);
            }
        }

        // åˆ é™¤ä¼šè¯
        function deleteSession() {
            if (currentSession) {
                Utils.confirm(`ç¡®å®šè¦åˆ é™¤ä¼šè¯"${currentSession.title}"å—ï¼Ÿ`, () => {
                    const index = sessions.findIndex(s => s.id === currentSession.id);
                    sessions.splice(index, 1);
                    filteredSessions = [...sessions];
                    
                    currentSession = null;
                    document.getElementById('detailContent').innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon">ğŸ“š</div>
                            <div>é€‰æ‹©å·¦ä¾§ä¼šè¯æŸ¥çœ‹è¯¦ç»†å†…å®¹</div>
                        </div>
                    `;
                    document.getElementById('detailTitle').textContent = 'é€‰æ‹©ä¸€ä¸ªä¼šè¯æŸ¥çœ‹è¯¦æƒ…';
                    
                    renderSessionsList();
                    Utils.showToast('ä¼šè¯å·²åˆ é™¤', 'success');
                });
            }
        }
    </script>
</body>
</html>

